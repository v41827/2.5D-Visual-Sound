#!/bin/bash

export PYTORCH_CUDA_ALLOC_CONF=expandable_segments:True
# Run the demo
ids="000823 001252 000201 000866 000361 001008 001165 001736 001073 001462 001620 001377 001443 001070 001649 000915 000688 001032 001626 001426 000517 001860 000034 000496 000986 001716 001020 000960 001434 001353 000194 000300 000019 001613 000768 001809 001743 000205 000924 000730 000452 001368 000146 000426 001710 000699 001358 000204 001548 000506 001015 000606 000575 001640 001035 001161 001831 000878 000822 001226 001493 001801 000871 000222 001154 000890 000450 001043 001789 001769 000892 001445 001118 001336 001668 001429 001168 000569 000905 001498 001007 001027 001747 000248 000401 000396 001294 001278 000607 001584 001251 000359 001172 000009 000636 001467 001328 000862 000089 001868 000237 001734 000646 000111 001351 000594 000609 000083 000845 001100 001339 000983 000804 000685 001446 001221 001319 000767 000532 000526 001804 000108 001198 000616 001502 000668 000918 001720 001025 000620 001081 000183 001086 001836 001149 000975 000479 000610 000063 001193 000011 000170 001141 000292 000782 001433 001428 001114 001634 001227 000391 000308 001773 000775 000601 000297 001170 000790 000104 001203 001260 001737 001342 001186 000855 001375 001612 000043 001714 001755 001028 001799 001381 000491 001496 001696 001253 000190 000267 001348 001059 001777 000801 000843 000748 000945 001309"

for id in $ids; do
  echo "Processing $id"
  python demo.py \
    --input_audio_path "/scratch/yc01847/FAIR-Play/binaural_audios/${id}.wav" \
    --video_frame_path "/scratch/yc01847/FAIR-Play/frames/${id}.mp4" \
    --hdf5FolderPath "/scratch/yc01847/FAIR-Play/splits/split7" \
    --weights_visual "/scratch/yc01847/2.5D-Visual-Sound/checkpoints/split7/mono2binaural/visual_best.pth" \
    --weights_audio "/scratch/yc01847/2.5D-Visual-Sound/checkpoints/split7/mono2binaural/audio_best.pth" \
    --output_dir_root "/scratch/yc01847/2.5D-Visual-Sound/demo_output/BaseSplit7/BaseSplit7_${id}" \
    --input_audio_length 10 \
    --hop_size 0.05
done
